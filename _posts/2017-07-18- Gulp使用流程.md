---
layout:     post
title:      Gulp使用流程
subtitle:   构建工具
date:       2017-07-18
author:     Ywg
header-img: img/home-bg-o.jpg
catalog:    true
tags: 构建工具
---
## 前言


## 1. 安装nodejs
gulp是基于nodejs的，新版node自带npm <br>
下载地址：http://nodejs.cn/download/ 

#### 1.1 确认是否安装成功
``` 
node -v
npm -v
``` 
输出版本号则安装成功。

#### 1.2 升级npm
``` 
npm install npm -g
``` 
## 2. 命令行使用
#### 2.1 打开命令提示符
window + r 输入cmd回车 <br>
注意：win10下需搜索cmd -> 右键管理员身份运行 才能npm安装node插件
#### 2.2 常用命令

命令 | 描述
------------ | -------------
node -v | 查看安装的nodejs版本，出现版本号，说明刚刚已正确安装nodejs。
npm -v | 查看npm的版本号，npm是在安装nodejs时一同安装的nodejs包管理器，
cd | 定位到目录，用法：cd + 路径 
dir | 列出文件列表
cls | 清空命令提示符窗口内容。

#### 2.2 npm介绍
npm（node package manager）: nodejs的包管理器，用于node插件管理（包括安装、卸载、管理依赖等） <br>
安装插件：npm install <name> [-g] [--save-dev]

命令 | 描述
------------ | -------------
name | node插件名称
-g | 全局安装。将会安装在C:\Users\Administrator\AppData\Roaming\npm，并且写入系统环境变量；全局安装可以通过命令行在任何地方调用它
不加-g | 非全局安装：将会安装在当前定位目录；本地安装将安装在定位目录的node_modules文件夹下，通过require()调用
--save | 将保存配置信息至package.json（package.json是nodejs项目配置文件）
-dev | 保存至package.json的devDependencies节点，不指定-dev将保存至dependencies节点；一般保存在dependencies的像这些express/ejs/body-parser等等


npm命令 | 描述
------------ | -------------
npm uninstall <name> [-g] [--save-dev] | 卸载插件
npm update <name> [-g] [--save-dev] | 更新插件
npm update [--save-dev] | 更新全部插件
npm help | 查看npm帮助
npm list | 查看当前目录已安装的插件


## 3. 安装全局gulp
```
npm install gulp -g 
```
## 4. 新建package.json文件
package.json是基于nodejs项目必不可少的配置文件，它是存放在项目根目录的普通json文件。<br
在项目根目录下，初始化文件，产生package.json
```
npm init
```
![package](http://img.blog.csdn.net/20160403162526733)

#### 4.1 检测package.json是否新建成功
打开项目文件根目录中的package.json文件，大致如下：
```
{
  "name": "test", //项目名称（必须）
  "version": "1.0.0", //项目版本（必须）
  "description": "我是描述", //项目描述（必须）
  "main": "index.js", //项目人口文件
  scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",   //项目作者信息
  "license": "ISC" //项目许可协议
}
```

### 5. 安装本地gulp
注：全局安装gulp是为了执行gulp任务，本地安装gulp则是为了调用gulp插件的功能 <br>
在项目文件根目录下:
```
npm install gulp --save-dev
```
安装完后，项目跟目录中多了node_modules文件夹，里面是你本地安装的插件

## 6. 安装gulp插件
在项目文件根目录下:
```
npm install gulp-less --save-dev 
```

## 7. 新建gulpfile.js文件
gulpfile.js是gulp的配置文件，放于项目根目录中。
```
/ 引入插件对应的对象
var gulp = require('gulp'),
    less = require('gulp-less');


```
详细gulp api介绍官网：http://www.gulpjs.com.cn/docs/api/

## 8. 执行代码打包
在项目文件根目录下:
```
gulp
```
