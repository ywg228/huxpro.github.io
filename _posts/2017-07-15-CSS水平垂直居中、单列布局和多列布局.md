---
layout:     post
title:      CSS水平垂直居中、单列布局和多列布局
subtitle:   CSS学习笔记
date:       2017-07-15
author:     Ywg
header-img: img/home-bg.jpg
catalog:    true
tags: CSS
---

## 前言
CSS布局包括元素水平垂直居中、单列布局和多列布局。需要了解几个属性：display、margin:auto、max-width、box-sizing、position、float、

## 元素水平居中和垂直居中
### 水平居中
#### 行内元素：
text-align: center;
#### 单个已知宽度的块级元素：
  margin: auto;
#### 多个未知宽度的块级元素：
1. 定位元素设置为display: inline; 父元素设置为text-align: center;

#### 未知宽度的块级元素 
1. 在元素外加入**table**标签（完整的，包括table、tbody、tr、td），该元素写在td内，然后设置margin:auto;
2. 定位元素设置为position: absolute; left: 50%; transform: translateX(-50%); 父元素设置为position: relative; 推荐
3. 块级元素的父元素设置为display: flex; justify-content: center; 推荐

### 垂直居中
#### 单行的行内元素:
将定位元素的height和line-height设置成和父元素高度一样 

#### 多行的行内元素：
将子元素设置为display: table-cell; vertical-align: middle，父元素设置为display: table; 

#### 已知高度的块状元素：
定位元素设置为position: absolute;top: 50%; margin-top设为元素高度加上内边距的一半的负值，父元素设置为position: relative;

#### 未知高度的块状元素：
1. 定位元素设置为position: absolute; top: 50%; transform: translateY(-50%); 父元素设置为position: relative; 推荐
2. 父元素设置为display:flex; align-items:center; 推荐

### 水平垂直居中
#### 已知宽高的元素：
1. 定位元素设置为position: absolute; top: 50%; left: 50%; margin-top和margin-left为元素高度加上内边距一半的负值，父元素设置为position: relative; 
```
/*兼容性非常好 常用*/
.parent {
  position: relative;
}
.box {
  width: 300px;
  height: 200px;
  padding: 20px;
  position: absolute;
  top: 50%; 
  left: 50%;
  margin-left: -170px; /* (width + padding)/2 */
  margin-top: -120px; /* (height + padding)/2 */
}
```
2. 定位元素设置为position: absolute; top:0; right: 0; bottom: 0; left: 0; margin: auto;父元素设置为position: relative;

#### 未知宽高的元素：
1. 定位元素设置为position: relative; display: inline-block; top: 50%; transform: translateY(-50%);父元素设置为 text-align: center; 不推荐
2. **定位元素设置为position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 父元素设置为position: relative; 最完美推荐**
```
/*内容高度可变 IE9+*/
.parent {
  position: relative;
}
.box  {
  position: absolute;
  top: 50%; 
  left: 50%;
  -webkit-transform: translate(-50%,-50%);
      -ms-transform: translate(-50%,-50%);
          transform: translate(-50%,-50%);
}
```
3. 父元素设置为display: flex; justify-content: center; align-items: center; 推荐
```
/*内容可以是任意宽高，溢出也能表现良好 IE10+*/
.parent {
  display: flex; 
  justify-content: center; 
  align-items: center;
}
```

## 单列布局

![单列布局](https://pic4.zhimg.com/v2-12cd0eddc97721987b9f6e41e5a1fc4b_r.png)

#### 特点
定宽、水平居中

#### 两种单列布局
1. 第一种：header、content、footer宽度都相同，其一般不会占满浏览器的最宽宽度，但当浏览器宽度缩小低于其最大宽度(max-width)时，宽度会自适应。

HTML:
```
<div class="layout">
  <div id="header">头部</div>
  <div id="content">内容</div>
  <div id="footer">尾部</div>
</div>
```

CSS:
```
.layout{
  max-width: 1080px;
  margin: auto;
}
```

2. 第二种：header、footer宽度为浏览器宽度，但content以及header和footer里的内容却不会占满浏览器宽度。

HTML:
```
<div id="header">头部</div>
<div id="content">
  <div class="layout">
    内容
  </div>
</div>
<div id="footer">尾部</div>
```

CSS:
```
.layout{
  max-width: 1080px;
  margin: auto;
}
```

## 二列和三列布局

### 特点
- 二列布局：侧栏固定宽度，主栏自适应宽度。

- 三列布局：两侧边栏固定宽度，中间栏自适应宽度。

![多列布局](https://pic2.zhimg.com/v2-784022577a47ea5fc449b06de53c4651_b.png)

### 第一种：float + margin
#### 原理
设置两个定宽侧边栏两边浮动，中间栏通过外边距给两个侧栏腾出空间，中间栏的宽度根据浏览器窗口自适应。

HTML:
```
<div class="content">
    <div class="left">左边栏固定宽度</div>
    <div class="right">右边栏固定宽度</div>
    <div class="main">中间栏内容自适应</div>
</div>
```

CSS:
```
        .content {
            width: 1080px;
            margin: auto;
        }

        .content div {
            height: 80px;
            line-height: 80px;
            text-align: center;
            color: #fff;
            font-size: 20px;
        }

        .content .left {
            float: left;
            width: 200px;
            background-color: lightgreen;
        }

        .content .right {
            float: right;
            width: 200px;
            background-color: lightgreen;
        }

        .content .main {
            margin-left: 205px;
            margin-right: 205px;
            background-color: lightseagreen;

        }
```

#### 注意点
DOM中有书写顺序限制，应先写侧边栏，再写主面板，否则侧边栏会被挤到下一行。<br>
上面是三列布局，那二列布局呢只需要去掉左边栏或右边栏，还有去掉主面板的margin-left或margin-right即可

#### 优缺点
- 优点：简单明了 <br>
- 缺点：因为侧边栏写前面，所以DOM渲染先渲染侧边栏，主面板后渲染。

### 第二种： position + margin
#### 原理
通过绝对定位将侧边栏固定，中间栏同样通过外边距给侧边栏腾出空间，中间列自适应宽度。
HTML:
```
<div class="content">
    <div class="main">中间栏内容自适应</div>
    <div class="left">左边栏固定宽度</div>
    <div class="right">右边栏固定宽度</div>
</div>
```
CSS：
```
        .content {
            width: 1080px;
            margin: auto;
            position: relative;
        }

        .content div {
            height: 80px;
            line-height: 80px;
            text-align: center;
            color: #fff;
            font-size: 20px;
        }

        .content .left, .content .right {
            position: absolute;
            width: 200px;
            top: 0;
            background-color: lightgreen;
        }

        .content .left {
            left: 0;
        }

        .content .right {
            right: 0;
        }

        .content .main {
            margin-left: 205px;
            margin-right: 205px;
            background-color: lightcoral;
        }
```

#### 优缺点
优点：无DOM书写顺序限制，所以应先写主面板会使主面板优先渲染
缺点：如果中间栏有最小宽度限制（min-width），或是含有最小宽度的内部元素，则浏览器窗口小到一定程度，主面板与侧栏会发生重叠。

### 第三种：圣杯布局：float + 负margin
#### 步骤
- 三者都设置向左浮动。
- 设置主面板宽度为100%，设置两侧边栏的宽度。
- 设置负边距，右侧边栏设置负左边距为100%，左侧边栏设置负左边距为负的自身宽度。
- 设置主面板的padding值给两侧边栏留出空间。
- 设置俩侧边栏为相对定位，左侧边栏的left值为负的自身宽度，右侧边栏的right值为负的自身宽度。

HTML:
```
<div class="wrap">
    <div class="content">
        <div class="main">中间栏内容自适应</div>
        <div class="left">左边栏固定宽度</div>
        <div class="right">右边栏固定宽度</div>
    </div>
</div>
```
CSS:
```
        .wrap {
            width: 1080px;
            margin: auto;
        }

        .content {
            padding: 0 205px 0 205px;
        }

        .content div {
            height: 80px;
            line-height: 80px;
            text-align: center;
            color: #fff;
            font-size: 20px;
            
            float: left;
        }

        .content .main {
            background-color: lightcoral;
            
            width: 100%;
        }

        .content .left, .content .right {
            background-color: lightgreen;
            width: 200px;
            position: relative;
        }

        .content .left {
            margin-left: -100%;
            left: -200px;
        }

        .content .right {
            margin-left: -200px;
            right: -200px;
        }
```
####  优缺点
DOM元素的书写顺序不得更改 <br>
当主面板比两侧边栏宽度小的时候，布局就会乱掉。可以通过设置主面板的min-width属性或使用双飞翼布局来避免。

### 第四种：双飞翼布局：float + 负margin 

#### 原理
圣杯布局升级版，都利用了浮动和负边距，在main元素上加了一层div, 并设置margin,由于两侧栏的负边距都是相对于main-wrap而言，main的margin值变化便不会影响两个侧栏，因此省掉了对两侧栏设置相对布局的步骤。

#### 步骤
- 三者都设置向左浮动。
- 设置main-wrap宽度为100%，设置两侧边栏的宽度。
- 设置 负边距，左侧边栏设置负左边距为100%，右侧边栏设置负左边距为负的自身宽度。
- 设置主面板的margin值给左右两个子面板留出空间。

HTML:
```
<div class="content">
    <div class="main-wrap">
        <div class="main">中间栏内容自适应</div>
    </div>
    <div class="left">左边栏固定宽度</div>
    <div class="right">右边栏固定宽度</div>
</div>
```
CSS：
```
        .content {
            width: 1080px;
            margin: auto;
        }

        .content > div {
            height: 80px;
            line-height: 80px;
            text-align: center;
            color: #fff;
            font-size: 20px;

            float: left;
        }

        .content .main-wrap {
            background-color: lightcoral;

            width: 100%;
        }

        .content .main {
            padding: 0 205px 0 205px;
        }

        .content .left, .content .right {
            background-color: lightgreen;

            width: 200px;
        }

        .content .left {
            margin-left: -100%;
        }

        .content .right {
            margin-left: -200px;
        }
```

#### 优缺点
优点
- 主面板部分优先渲染
- 圣杯布局采用的是padding，而双飞翼布局采用的margin，解决了圣杯布局主面板的最小宽度不能小于左侧栏的缺点。
- 双飞翼布局不用设置相对布局，以及对应的left和right值。
- 通过引入相对布局，可以实现三栏布局的各种组合，例如对右侧栏设置position: relative; left: 190px;,可以实现sub+extra+main的布局。


### Flex布局
[Flex 布局教程：语法篇](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html) <br>
[Flex 布局教程：实例篇](http://www.ruanyifeng.com/blog/2015/07/flex-examples.html) <br>

HTML:
```
<div class="container">
    <div class="layout">
        <div class="aside">侧边栏宽度固定</div>
        <div class="main">主内容栏宽度自适应</div>
    </div>
    <div class="layout">
        <div class="main">主内容栏宽度自适应</div>
        <div class="aside">侧边栏宽度固定</div>
    </div>
    <div class="layout">
        <div class="aside">左侧边栏宽度固定</div>
        <div class="main">主内容栏宽度自适应</div>
        <div class="aside">右侧边栏宽度固定</div>
    </div>
    <div class="layout">
        <div class="aside">第1个侧边栏宽度固定</div>
        <div class="aside">第2个侧边栏宽度固定</div>
        <div class="main">主内容栏宽度自适应</div>
    </div>
    <div class="layout">
        <div class="main">主内容栏宽度自适应</div>
        <div class="aside">第1个侧边栏宽度固定</div>
        <div class="aside">第2个侧边栏宽度固定</div>
    </div>
</div>
```
CSS:
```
        .container {
            width: 1080px;
            margin: auto;
        }

        .layout > div {
            height: 80px;
            line-height: 80px;
            text-align: center;
            color: #fff;
            font-size: 20px;
            margin: 5px;
        }

        .layout .main {
            background-color: lightcoral;
        }

        .layout .aside {
            background-color: lightseagreen;
        }

        .layout {
            display: flex;
        }

        .main {
            flex: 1;
        }

        .aside {
            width: 200px;
        }
```

#### 优点：
代码相当简洁
