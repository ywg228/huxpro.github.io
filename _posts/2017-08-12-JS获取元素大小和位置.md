---
layout:     post
title:      JS获取元素大小和位置
subtitle:   JS基础
date:       2017-08-12
author:     Ywg
header-img: img/home-bg-o.jpg
catalog:    true
tags: JavaScript JS基础
---

##前言

## 偏移量 offsetXXX
- offsetParent: 是一个只读属性，返回元素最近的定位元素。如果没有定位元素，则 offsetParent 为最近的 table 元素对象或根元素（标准模式下为 html；怪异模式下为 body）。当元素设置 display:none 或定位为 fixed 时，offsetParent 返回 null。
- offsetWidth: 元素在水平方向占据的空间大小 => 内容宽度 + 左右padding + 左右boder
- offsetHeight: 元素在垂直方向占据的空间大小 => 内容高度 + 上下padding + 上下boder
- offsetTop: 元素外边框距离offsetParent的上内边框的距离
- offsetLeft: 元素外边框距离offsetParent的左内边框的距离

## 元素大小 clientXXX
- clientWidth: 元素内容及内边距所占空间宽度, 不包含滚动部分
- clientHeight: 元素内容及内边距所占空间高度, 不包含滚动部分

![client](https://segmentfault.com/img/remote/1460000005155281)

## 滚动条滚动距离即文档被卷走的距离
- scrollLeft: 左侧元素内容被卷走的距离(有横向滚动条时)
- scrollTop: 顶部元素内容被卷走的距离(有竖向滚动条时)
- scrollHeight: 在没有滚动条时，元素内容的高度
- scrollWidth: 在没有滚动条时，元素内容的宽度

![scroll](https://segmentfault.com/img/remote/1460000005155283)

##常用操作
#### 获取浏览器窗口可视区域尺寸
```
function getViewPortSize() {
  var viewW = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth || 0;
  var viewH = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight || 0;
  return {'width': viewW, 'height': viewH};
}
```

####  获取元素外边框距离offsetParent的内边框的距离
```
        function offset(ele) {
            var p = ele.offsetParent,
                l = ele.offsetLeft,
                t = ele.offsetTop;

            //只要没有找到body，我们就把父级参照物的边框和偏移量累加
            while (p) {
                if (window.navigator.userAgent.indexOf('MSIE 8.0') === -1) {
                    //不是标准的ie8浏览器，才进行边框累加
                    //累加父级参照物边框
                    l += p.clientLeft;
                    t += p.clientTop;
                }
                //累加父级参照物本身的偏移
                l += p.offsetLeft;
                t += p.offsetTop;
                p = p.offsetParent;
            }
            return {left: l, top: t};
        }
```
